<!DOCTYPE html>
<html class="no-js" manifest="manifest.appcache">
<style>
img {
	width: 60%;
}
.form-control::-moz-placeholder {
	color: #000 !important;
	opacity: 1;
}
.form-control.input-lg {
	color: #000 !important;
}
img {
	margin-bottom: 5%;
	margin-top: 5%;
	width: 50%;
}
.form-bordered .form-group {
	border: medium none;
	margin: 0;
	padding: 10px !important;
}::-webkit-input-placeholder {
   color: #000 !important;
}
#thankyouimg {
    float: left;
    margin-top: -15%;
    width: 100%;
}
#thankyouimg > img {
    width: 100%;
}
#loaderssdsass{
	background: none repeat scroll 0 0 rgba(255, 255, 255, 0.7);
    float: left;
    height: 100%;
    margin-left: -1.3%;
    margin-top: -20%;
    position: absolute;
    text-align: center;
    width: 100%;
    z-index: 2147483647;
}
#loaderssdsassimg{
	background: #fff none repeat scroll 0 0;
    border: 2px solid #a2460a;
    border-radius: 6px;
    margin-top: 97%;
    padding: 2%;
    width: 13%;
}
#main-container-new {
	background: none repeat scroll 0 0 rgba(255, 255, 255, 0.7);
	float: left;
	height: 100%;
	position: absolute;
	text-align: center;
	width: 100%;
	z-index: 9999;
}
.form-bordered {
    background: #f7f7f7 none repeat scroll 0 0 !important;
}
.block{
	background: #f7f7f7 !important;	
}
h1{
	text-align:center;
}
</style>
<head>
<title>Helse</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0">
<link rel="stylesheet" href="css/bootstrap.min.css">
<meta charset="utf-8"><meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
<meta name="HandheldFriendly" content="true">
<meta name="mobile-web-app-capable" content="yes">
<!-- The main stylesheet of this template. All Bootstrap overwrites are defined in here -->
<link rel="stylesheet" href="css/main.css">

<!-- Include a specific file here from css/themes/ folder to alter the default theme of the template -->

<!-- The themes stylesheet of this template (for using specific theme color in individual elements - must included last) -->
<link rel="stylesheet" href="css/themes.css">
<!-- END Stylesheets -->

<!-- Modernizr (browser feature detection library) & Respond.js (Enable responsive CSS code on browsers that don't support it, eg IE8) --><link rel="stylesheet" href="css/plugins.css">
</head>

<body style="background:#f7f7f7;min-height: 100% !important;display:none;">
<!-- Login Background --> 
<div id="main-container-new" style="display:none;"></div>
<!-- END Login Background -->
<div id="loaderssdsass" style="display:none;"> <img id="loaderssdsassimg" src="images/loading.gif"> </div>
<!-- Login Container -->

<!-- Login Title -->
<div class="login-title text-center">  </div>
<!-- Login Block -->
<div class="block push-bit"> 
  <!-- Login Form -->
  <form action=""  name="uploader" method="post" id="form-login" class="form-horizontal form-bordered" >
  <h1>Login</h1>
    <div class="form-group">
      <div class="col-xs-12">
        <div class="input-group"> <span class="input-group-addon"  ><i class="fa fa-envelope" ></i></span>
          <input type="text" id="usernamelogin" value=""   name="username"  class="form-control input-lg" placeholder="Email"  autocomplete="off">
        </div>
      </div>
    </div>
    <div class="form-group"  >
      <div class="col-xs-12">
        <div class="input-group"> <span class="input-group-addon"  ><i class="fa fa-lock" ></i></span>
          <input type="password" id="passwordlogin" value=""   name="password" class="form-control input-lg" placeholder="Password"  autocomplete="off">
        </div>
      </div>
    </div>
	<input type="hidden" name="submit">
    
    <div class="form-group">
      <div class="col-xs-12">
        <div class="checkbox" style="margin-left:5%;">
			<label for="example-checkbox1" style="font-size:13px;">
				<input type="checkbox" value="1" id="checkBox1" >&nbsp;&nbsp;&nbsp;&nbsp; Remember Me 
			</label>
		</div>
      </div>
    </div>
    <div class="form-group">
      <div class="col-xs-12 text-right" style="text-align: center;margin-top:10%;">
        <a onClick="login();"  class="btn btn-md btn-primary" style="width: 45%;"> Login</a>
      </div>
    </div>
    <div class="form-group">
      <div class="col-xs-12 text-center" id="asdadsadssa" style="color:red;font-size:13px !important;font-weight: bold;"></div>
    </div>
    <div class="form-group">
      <div class="col-xs-12 text-center" style="margin-top:-2%;">
		<a id="link-register-login" style="color:#000;text-decoration:none;" onclick="createacc()"><small>Create a new account</small></a>
	  </div>
    </div>
    <div class="form-group">
      <div class="col-xs-12 text-center" style="margin-top:-2%;">
		<a id="link-register-login" style="color:#000;text-decoration:none;" onclick="login_password()"><small>Forgot Password ?</small></a>
	  </div>
    </div>
  </form>

  <!-- Reminder Form --> 
  <form action="" style="display:none;" method="post" id="form-registerdasd" class="form-horizontal form-bordered" >
	<h1>Restore Password</h1>
    <div class="form-group"  >
      <div class="col-xs-12">
        <div class="input-group"> <span class="input-group-addon"  ><i class="fa fa-envelope" ></i></span>
          <input type="text" id="user_login_email" value=""    class="form-control input-lg" placeholder="Email"  autocomplete="off">
        </div>
      </div>
    </div>
    <input type="hidden" name="submit">
    
    <div class="form-group">
      <div class="col-xs-12 text-right" style="text-align: center;margin-top:10%;">
        <a onClick="forgot_p_login();"  class="btn btn-md btn-primary" style="width: 45%;"> Reset Password</a>
      </div>
    </div>
    <div class="form-group">
      <div class="col-xs-12 text-center" id="forgot_pass_status" style="color:red;font-size:13px !important;font-weight: bold;"> </div>
    </div>
    <div class="form-group">
      <div class="col-xs-12 text-center" style="margin-top:-2%;"> <a  id="link-register-login" style="color:#000;text-decoration:none;" onclick="createaccaasd()"><small>Already have an account ? Login</small></a> </div>
    </div>
  </form>
  <!-- END Reminder Form --> 
  
  <!-- Register Form -->
  <form action="" name="uploadera" enctype="multipart/form-data" method="post" id="form-register" class="form-horizontal form-bordered display-none">
	<h1>Register</h1>
<!--    <div class="form-group"  >
      <div class="col-xs-12" >
        <div class="input-group">
		  <span class="input-group-addon" ><i class="fa fa-user" ></i></span>
          <input type="text"  autocomplete="off" id="inputtxt" onkeyup="allLetter(document.uploadera.firstname)" name="firstname" class="form-control input-lg" placeholder="Name">
        </div>
      </div>
    </div>-->
    <div class="form-group" >
      <div class="col-xs-12">
        <div class="input-group"> <span class="input-group-addon" ><i class="fa fa-envelope" ></i></span>
          <input type="text" id="register-email"  name="username"  autocomplete="off" class="form-control input-lg" placeholder="Email">
        </div>
      </div>
    </div>
    <script>
		function allLetter(inputtxt){
			var letters = /^[A-Za-z]+$/;
			if(inputtxt.value.match(letters)) {
				return true;
			}
			else {
				inputtxt.value = inputtxt.value.replace(/\d+/g, '');
			}
		}
		function allLettera(inputtxt){
			var letters = /^[A-Za-z]+$/;
			if(inputtxt.value.match(letters)) {
				return true;
			}
			else {
				inputtxt.value = inputtxt.value.replace(/[^0-9+ ]/g, '');
			}
		}
	</script>
<!--    <div class="form-group" >
      <div class="col-xs-12">
        <div class="input-group"> <span class="input-group-addon" ><i class="fa fa-lock" ></i></span>
          <input type="password" id="register-password" autocomplete="off" name="password" class="form-control input-lg" placeholder="Password">
        </div>
      </div>
    </div>-->
    
<!--    <div class="form-group" >
      <div class="col-xs-12">
        <div class="input-group"> <span class="input-group-addon" ><i class="fa fa-lock" ></i></span>
          <input type="password" id="register-passworda" autocomplete="off" name="passworda" class="form-control input-lg" placeholder="Confirm Password">
        </div>
      </div>
    </div>-->
    <input type="hidden" name="register">
    <div class="form-group">
      <div class="col-xs-12" style="text-align: center;">
          <button type="submit" name="register" onclick="registerNewUser();" class="btn btn-md btn-primary" style="margin-top:12%;margin-bottom: -2%;"><i class="fa fa-arrow-right"></i> Register 	</button>
      </div>
    </div>
	<div class="form-group">
		<div class="col-xs-12" style="text-align:center; font-size:13px !important;font-weight: bold;color:red;" id="asdadsadssaa"></div>
	</div>
    <div class="form-group">
      <div class="col-xs-12 text-center"><a Onclick="createacca()" id="link-register" style="color:#000;text-decoration:none;"> <small style="color:#000;" >Already have an account ?</small> <small>Login</small></a> </div>
    </div>
  </form>
  <!-- END Register Form --> 
</div>
<!-- END Login Block --> 

<script>!window.jQuery && document.write(decodeURI('%3Cscript src="js/vendor/jquery-1.11.0.min.js"%3E%3C/script%3E'));</script>

<script type="text/javascript" charset="utf-8" src="cordova.js"></script> 
<script>
    
	function forgot_p_login()
	{
		var v = $("#user_login_email").val();

		$('#loaderssdsass').show();
		$('#main-container-new').show();
		$.ajax({
			url: "http://projects.devofto.com/devofto12/login_code.php",
			type: "POST",
			data: {email:v,forgotpass:0},
			success: function (msg) {
				if(msg == "ok"){
				$("#forgot_pass_status").html("<san style='color:green;'>Check Your Email For Password</span>");
				$('#loaderssdsass').hide();
				$('#main-container-new').hide();
				}
				else{
				$("#forgot_pass_status").html(msg);
				$('#loaderssdsass').hide();
				$('#main-container-new').hide();
				}
			}
		});
	}
        function registerNewUser(){
                var v = $("#register-email").val();
                var auth = '';
		$('#loaderssdsass').show();
		$('#main-container-new').show();
                var endpoint = "https://dev.rep1st.com/api/v1/device_user/{company_id}/sendConfirmationEmail";
                endpoint = endpoint.replace('{company_id}',167);
                if(!auth){
                    $.ajax({
			url: endpoint,
			type: "POST",
			data: {userEmail:v,appSchema:"teashopwongs",role:"staff"},
                        dataType: 'json',
			success: function (msg) {
                            alert(JSON.stringify(msg));
				if(msg.status == "ok"){
                                    alert(msg.description);
//				$("#forgot_pass_status").html("<san style='color:green;'>Check Your Email For Password</span>");
				$('#loaderssdsass').hide();
				$('#main-container-new').hide();
				}
				else{
//				$("#forgot_pass_status").html(msg);
				$('#loaderssdsass').hide();
				$('#main-container-new').hide();
				}
			},
                     error: function(e){
                         alert("err");
                         
                     }
		});
                }
		
        }
	function createaccaasd(){
		$('#loaderssdsass').show();
		$('#main-container-new').show();
		$('#form-login').toggle();
		setTimeout(clicklogsa, 900)
		setTimeout(clickloga, 1000)
	}
	function login_password(){
		$('#loaderssdsass').show();
		$('#main-container-new').show();
		$('#form-login').toggle();
		setTimeout(clicklogsa, 900)
		setTimeout(clickloga, 1000)
	}
	function clicklogsa() {
		$('#form-registerdasd').toggle();
	}
	function createacc(){		
		$('#loaderssdsass').show();
		$('#main-container-new').show();
		$('#form-login').toggle();
		setTimeout(clicklog, 900)
		setTimeout(clickloga, 1000)
	}
	function createacca(){		
		$('#loaderssdsass').show();
		$('#main-container-new').show();
		$('#form-register').toggle();
		setTimeout(clicklogc, 900)
		setTimeout(clickloga, 1000)
	}
	function clicklog(){
		$('#form-register').toggle();
	}
	function clickloga(){
		$('#loaderssdsass').hide();
		$('#main-container-new').hide();
	}
	function clicklogc(){
		$('#form-login').toggle();
	}

	$("form[name='uploadera']").submit(function(e) {
		$('#loaderssdsass').show();
		$('#main-container-new').show();
		var formData = new FormData($(this)[0]);
		var formDataSerialized = $(this).serialize();
        $.ajax({
            url: "http://projects.devofto.com/devofto12/login_code.php",
            type: "POST",
            data: formData,
            async: false,
            success: function (msg) {
				if(msg == "Email Already Exists") {
				   $("#asdadsadssaa").html(msg);
				   $('#loaderssdsass').hide();
				   $('#main-container-new').hide();
				}
				else if(msg == "All Fields Required") {
				   $("#asdadsadssaa").html(msg);
				   $('#loaderssdsass').hide();
				   $('#main-container-new').hide();
				}
				else if(msg == "Passwords dont match") {
				   $("#asdadsadssaa").html(msg);
				   $('#loaderssdsass').hide();
				   $('#main-container-new').hide();
				}
				else {
					$("#form-register").hide();
					$('#loaderssdsass').hide();
					$('#main-container-new').hide();
					$('#reguserid').val(msg);
					$('#form-login').show();
				}
            },
            cache: false,
            contentType: false,
            processData: false
        });
        e.preventDefault();
    });
// LOGIN --------------------------------------
          function login(){
		$('#loaderssdsass').show();
		$('#main-container-new').show();
		var a= $("#usernamelogin").val();
		var b=$("#passwordlogin").val();
		if(document.getElementById('checkBox1').checked) {
			window.localStorage.setItem("username", a);
			window.localStorage.setItem("password", b);
		}
		else {
			var checkbox1=0;
		}
		$.ajax({
			//url: "http://projects.devofto.com/devofto12/login_code.php",
                        url: "https://dev.rep1st.com/oauth2/token",
			type: "POST",
                         data: { "scope": "rest",
                                "grant_type": "password",
                                "username": a,
                                "password": b,
                                "client_id": "rest_client",
                                "client_secret": "h4llr42s4r"
                            },
//			data: {checkbox1:checkbox1,username : a,password:b,submit:0},
			success: function (msg) {
//                            alert(msg.access_token);
                            console.log(msg);
                            if(typeof(msg.access_token) !== 'undefined'){
                              window.localStorage.setItem("userEmail", a);
                              window.localStorage.setItem("accessToken", msg.access_token);
                              console.log(window.localStorage.getItem("accessToken"));
                              var id = 2;//msg;
                              window.location='indexnew.html?url=indexa.html&id='+id;
                            }
//				if (isNaN(msg)) {
//					$("#asdadsadssa").html(msg);
//					$('#loaderssdsass').hide();
//					$('#main-container-new').hide();
//				}
				else {
//					var id = 2;//msg;
//					window.location='indexnew.html?url=indexa.html&id='+id;
				}
			}
		});
	}
//	function login(){
//		$('#loaderssdsass').show();
//		$('#main-container-new').show();
//		var a= $("#usernamelogin").val();
//		var b=$("#passwordlogin").val();
//		if(document.getElementById('checkBox1').checked) {
//			window.localStorage.setItem("username", a);
//			window.localStorage.setItem("password", b);
//		}
//		else {
//			var checkbox1=0;
//		}
//		/*$.ajax({
//			url: "http://projects.devofto.com/devofto12/login_code.php",
//			type: "POST",
//			data: {checkbox1:checkbox1,username : a,password:b,submit:0},
//			success: function (msg) {
//				if (isNaN(msg)) {
//					$("#asdadsadssa").html(msg);
//					$('#loaderssdsass').hide();
//					$('#main-container-new').hide();
//				}
//				else {*/
//					var id = 2;//msg;
//					window.location='indexnew.html?url=indexa.html&id='+id;
//				/*}
//			}
//		});*/
//	}
	
$(window).load(function() {
	$('body').show();
	checkCookie();
});
function minus(v){
	var a = $("#number_odred_pop"+v).html();
	if(a != 0)
	{
	a=parseInt(a)-1;	
	}
	$("#number_odred_pop"+v).html(a);
}
function plus(v){
	var a = $("#number_odred_pop"+v).html();
	if(a != 10)
	{
		a=parseInt(a)+1;	
	}
	$("#number_odred_pop"+v).html(a);
}
function minusa(v){
	var a = $("#number_odred_popa"+v).html();
	if(a != 0)
	{
		a=parseInt(a)-1;	
	}
	$("#number_odred_popa"+v).html(a);
}
function plusa(v){
	var a = $("#number_odred_popa"+v).html();
	if(a != 10)
	{
		a=parseInt(a)+1;	
	}
	$("#number_odred_popa"+v).html(a);
}
function getRadioVal(form, name) {
    var val;
    var radios = form.elements[name];
    for (var i=0, len=radios.length; i<len; i++) {
        if ( radios[i].checked ) { // radio checked?
            val = radios[i].value; // if so, hold its value in val
            break; // and break out of for loop
        }
    }
    return val; // return value of checked radio or undefined if none checked
}
function checkCookie() {
	var username = window.localStorage.getItem("username");
	var password = window.localStorage.getItem("password");

	if(username == ""){
		document.getElementById("checkBox1").checked = false; 
	}else {
		document.getElementById("checkBox1").checked = true; 
	}
	$("#usernamelogin").val(username);
	$("#passwordlogin").val(password);    
}
</script>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script>
    
  function getParameterByName( name,href )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( href );
  if( results == null )
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}
    function handleOpenURL(url) {
//        var urls = 'teashopwongs://register?iid=7d731fb03cc5a6958ec1d8dbe9381b26';
        var urls = getParameterByName('iid',url);
        
        var auth = '';
        $('#loaderssdsass').show();
        $('#main-container-new').show();
        var endpoint = "https://dev.rep1st.com/api/v1/device_user/{company_id}/confirmCode";
        endpoint = endpoint.replace('{company_id}',167);
        alert(auth);
        alert(endpoint);
        alert(urls);
        alert("POST");
        if(!auth){
            $.ajax({
                url: endpoint,
                type: "POST",
                data: {iid:urls},
                dataType: 'json',
                success: function (msg) {
//                    alert(JSON.stringify(msg));
                        if(msg.status == "ok"){
                            alert(msg.description);
//				$("#forgot_pass_status").html("<san style='color:green;'>Check Your Email For Password</span>");
                        $('#loaderssdsass').hide();
                        $('#main-container-new').hide();
                        }
                        else{
//				$("#forgot_pass_status").html(msg);
                        $('#loaderssdsass').hide();
                        $('#main-container-new').hide();
                        }
                },
             error: function(e){
                 alert("err");

             }
        });
        }
        
        
        //alert("received url: " + urls);
}
function onBackButtonTapped() {
	// document.location.reload(true);
	navigator.app.exitApp();
}
function onDeviceReady() {
    
//        var push = PushNotification.init({
//            android: {
//                senderID: "521007401337"
//            },
//            browser: {
//                pushServiceURL: 'http://push.api.phonegap.com/v1/push'
//            },
//            ios: {
//                alert: "true",
//                badge: "true",
//                sound: "true"
//            },
//            windows: {}
//        });
//
//        push.on('registration', function(data) {
//            alert(data+" therre0");
//            // data.registrationId
//        });
//
//        push.on('notification', function(data) {
//             alert(data+" messge");
//            // data.message,
//            // data.title,
//            // data.count,
//            // data.sound,
//            // data.image,
//            // data.additionalData
//        });
//
//        push.on('error', function(e) {
//             alert(e+" errrr");
//            // e.message
//        });
document.addEventListener("backbutton", onBackButtonTapped, false);
}

document.addEventListener("deviceready", onDeviceReady, false);
</script>
</body>
</html>